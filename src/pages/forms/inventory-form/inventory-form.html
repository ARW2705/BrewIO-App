<ion-header>
  <ion-navbar>
    <ion-title>Inventory Form</ion-title>
  </ion-navbar>
</ion-header>

<ion-content  padding
              class="sub-page">

  <ion-grid *ngIf="inventoryForm">

    <ion-row>

      <form [formGroup]="inventoryForm">

        <!-- Supplier Info Section -->

        <!-- Item supplier name -->
        <ng-container *ngIf="batch === null">

          <ion-item class="form-input">

            <ion-label floating>
              Supplier Name
            </ion-label>

            <ion-input  formControlName="supplierName"
                        type="text"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="off"
                        spellcheck="false">
            </ion-input>

          </ion-item>

          <!-- Error messages -->
          <form-error *ngIf="
            inventoryForm.controls['supplierName'].touched
            && inventoryForm.controls['supplierName'].errors
          "
                      formName="inventory"
                      controlName="supplierName"
                      [controlErrors]="inventoryForm.controls['supplierName'].errors">
          </form-error>


        </ng-container>


        <!-- Item supplier website url [optional] -->
        <ng-container *ngIf="batch === null && inventoryForm.controls.supplierURL !== undefined">

          <ion-item class="form-input">

            <ion-label floating>
              Supplier Website URL
            </ion-label>

            <ion-input  formControlName="supplierURL"
                        type="url"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="off"
                        spellcheck="false">
            </ion-input>

          </ion-item>

        </ng-container>


        <!-- Item supplier image file name [optional] -->
        <!-- <ion-item  class="form-input"
                        *ngIf="batch === null">
          <ion-label floating>Supplier Image</ion-label>
          <ion-input  type="text"
                      formControlName="supplierLabelImageURL">
          </ion-input>
        </ion-item> -->


        <!-- Item source type -->
        <ng-container *ngIf="batch === null">

          <ion-item class="form-input">

            <ion-label floating>
              Item Source
            </ion-label>

            <ion-select formControlName="sourceType"
                        okText="Okay"
                        cancelText="Dismiss">

              <ion-option value="self">
                My Recipe
              </ion-option>

              <ion-option value="other">
                Other User Recipe
              </ion-option>

              <ion-option value="third">
                Third Party
              </ion-option>

            </ion-select>

          </ion-item>

          <!-- Error messages -->
          <form-error *ngIf="
            inventoryForm.controls['sourceType'].touched
            && inventoryForm.controls['sourceType'].errors
          "
                      formName="inventory"
                      controlName="sourceType"
                      [controlErrors]="inventoryForm.controls['sourceType'].errors">
          </form-error>


        </ng-container>


        <!-- END Supplier Info Section -->

        <!---------------------------------------------->

        <!-- Item Details Section -->

        <!-- Item name -->
        <ng-container *ngIf="batch === null">

          <ion-item class="form-input">

            <ion-label floating>
              Item Name
            </ion-label>

            <ion-input  formControlName="itemName"
                        type="text"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="off"
                        spellcheck="false">
            </ion-input>

          </ion-item>

          <!-- Error messages -->
          <form-error *ngIf="
            inventoryForm.controls['itemName'].touched
            && inventoryForm.controls['itemName'].errors
          "
                      formName="inventory"
                      controlName="itemName"
                      [controlErrors]="inventoryForm.controls['itemName'].errors">
          </form-error>


        </ng-container>


        <!-- Item additional name [optional] -->
        <ng-container *ngIf="batch === null && inventoryForm.controls.itemSubname !== undefined">

          <ion-item class="form-input">

            <ion-label floating>
              Item Additional Name
            </ion-label>

            <ion-input  formControlName="itemSubname"
                        type="text"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="off"
                        spellcheck="false">
            </ion-input>

          </ion-item>

          <!-- Error messages -->
          <form-error *ngIf="
            inventoryForm.controls['itemSubname'].touched
            && inventoryForm.controls['itemSubname'].errors
          "
                      formName="inventory"
                      controlName="itemSubname"
                      [controlErrors]="inventoryForm.controls['itemSubname'].errors">
          </form-error>


        </ng-container>


        <!-- Item description [optional] -->
        <ion-item class="form-input">

          <ion-label floating>
            Description
          </ion-label>

          <ion-textarea formControlName="description"
                        rows="3"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="off"
                        spellcheck="false">
          </ion-textarea>

        </ion-item>

        <!-- Error messages -->
        <form-error *ngIf="
          inventoryForm.controls['description'].touched
          && inventoryForm.controls['description'].errors
        "
                    formName="inventory"
                    controlName="description"
                    [controlErrors]="inventoryForm.controls['description'].errors">
        </form-error>


        <!-- Item label image name [optional] -->
        <!-- <ion-item class="form-input">
          <ion-label floating>Item Label Image</ion-label>
          <ion-input  type="text"
                      formControlName="itemLabelImageURL">
          </ion-input>
        </ion-item> -->


        <!-- Item Style -->
        <ng-container *ngIf="batch === null && styles !== null">

          <ion-item class="form-input">

            <ion-label floating>
              Select Style
            </ion-label>

            <ion-select formControlName="itemStyleId"
                        okText="Okay"
                        cancelText="Dismiss"
                        [(ngModel)]="styleSelection"
                        (ionChange)="onStyleSelection($event)"
                        [compareWith]="compareWithFn">

              <ion-option *ngFor="let style of styles"
                          [value]="style">
                {{ style.name }}
              </ion-option>

            </ion-select>

          </ion-item>

          <!-- Error messages -->
          <form-error *ngIf="
            inventoryForm.controls['itemStyleId'].touched
            && inventoryForm.controls['itemStyleId'].errors
          "
                      formName="inventory"
                      controlName="itemStyleId"
                      [controlErrors]="inventoryForm.controls['itemStyleId'].errors">
          </form-error>


        </ng-container>

        <!-- Item ABV -->
        <ng-container *ngIf="batch === null">

          <ion-item class="form-input">

            <ion-label floating>
              ABV
            </ion-label>

            <ion-input  formControlName="itemABV"
                        type="number"
                        autocomplete="off">
            </ion-input>

          </ion-item>

          <!-- Error messages -->
          <form-error *ngIf="
            inventoryForm.controls['itemABV'].touched
            && inventoryForm.controls['itemABV'].errors
          "
                      formName="inventory"
                      controlName="itemABV"
                      [controlErrors]="inventoryForm.controls['itemABV'].errors">
          </form-error>


        </ng-container>


        <!-- Item IBU -->
        <ng-container *ngIf="batch === null && inventoryForm.controls.itemIBU !== undefined">

          <ion-item class="form-input">

            <ion-label floating>
              IBU
            </ion-label>

            <ion-input  formControlName="itemIBU"
                        type="number"
                        autocomplete="off">
            </ion-input>

          </ion-item>

          <!-- Error messages -->
          <form-error *ngIf="
            inventoryForm.controls['itemIBU'].touched
            && inventoryForm.controls['itemIBU'].errors
          "
                      formName="inventory"
                      controlName="itemIBU"
                      [controlErrors]="inventoryForm.controls['itemIBU'].errors">
          </form-error>


        </ng-container>


        <!-- Item SRM -->
        <ng-container *ngIf="batch === null && inventoryForm.controls.itemSRM !== undefined">

          <ion-item class="form-input">

            <ion-label floating>
              SRM
            </ion-label>

            <ion-input  formControlName="itemSRM"
                        type="number"
                        autocomplete="off">
            </ion-input>

          </ion-item>

          <!-- Error messages -->
          <form-error *ngIf="
            inventoryForm.controls['itemSRM'].touched
            && inventoryForm.controls['itemSRM'].errors
          "
                      formName="inventory"
                      controlName="itemSRM"
                      [controlErrors]="inventoryForm.controls['itemSRM'].errors">
          </form-error>


        </ng-container>


        <!-- END Item Details Section -->

        <!---------------------------------------------->

        <!-- Stock Details Section -->

        <!-- Item stock type -->
        <ion-item class="form-input">

          <ion-label floating>
            Stock Type
          </ion-label>

          <ion-select formControlName="stockType"
                      okText="Okay"
                      cancelText="Dismiss">

            <ion-option *ngFor="let type of stockTypes"
                        [value]="type.name">
              {{ type.name }}
            </ion-option>

          </ion-select>

        </ion-item>

        <!-- Error messages -->
        <form-error *ngIf="
          inventoryForm.controls['stockType'].touched
          && inventoryForm.controls['stockType'].errors
        "
                    formName="inventory"
                    controlName="stockType"
                    [controlErrors]="inventoryForm.controls['stockType'].errors">
        </form-error>


        <!-- Initial Quantity -->
        <ion-item class="form-input">

          <ion-label floating>
            Initial Quantity
          </ion-label>

          <ion-input  formControlName="initialQuantity"
                      type="number"
                      autocomplete="off">
          </ion-input>

        </ion-item>

        <!-- Error messages -->
        <form-error *ngIf="
          inventoryForm.controls['initialQuantity'].touched
          && inventoryForm.controls['initialQuantity'].errors
        "
                    formName="inventory"
                    controlName="initialQuantity"
                    [controlErrors]="inventoryForm.controls['initialQuantity'].errors">
        </form-error>


        <!-- Current Quantity -->
        <ng-container *ngIf="item !== null">

          <ion-item class="form-input">

            <ion-label floating>
              Current Quantity
            </ion-label>

            <ion-input  formControlName="currentQuantity"
                        type="number"
                        autocomplete="off">
            </ion-input>

          </ion-item>

          <!-- Error messages -->
          <form-error *ngIf="
            inventoryForm.controls['currentQuantity'].touched
            && inventoryForm.controls['currentQuantity'].errors
          "
                      formName="inventory"
                      controlName="currentQuantity"
                      [controlErrors]="inventoryForm.controls['currentQuantity'].errors">
          </form-error>


        </ng-container>

        <!-- End Stock Details Section -->

      </form>

    </ion-row>

    <ion-row>

      <ion-col *ngIf="!isRequired">

        <button ion-button
                color="primary"
                (click)="dismiss()"
                class="form-button">
          Cancel
        </button>

      </ion-col>

      <ion-col>

        <button ion-button
                color="primary"
                (click)="onSubmit()"
                class="form-button"
                [disabled]="!inventoryForm.valid">
          Submit
        </button>

      </ion-col>

    </ion-row>

  </ion-grid>

</ion-content>
